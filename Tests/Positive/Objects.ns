Cat := class: "Cat"
assertEqual: Cat.name "Cat"

Cat.new := [ name |
  object: Cat {
    name := name
  }
]

Cat.lastMeow := { cat := nil, expression := nil }

Cat.meow := [ self expression |
  Cat.lastMeow.cat = self
  Cat.lastMeow.expression = expression
]

-- Invoke the constructor explicitly
janks := Cat.new: "Janks"
assertEqual: (classOf: janks) Cat
assertEqual: janks.name "Janks"

-- Invoke the constructor implicitly
svedka := Cat: "Svedka"
assertEqual: (classOf: svedka) Cat
assertEqual: svedka.name "Svedka"

-- Verify that no cats have meowed
assertEqual: Cat.lastMeow.cat nil
assertEqual: Cat.lastMeow.expression nil

-- Invoke class method
janks..meow: "Hiss"
assertEqual: Cat.lastMeow.cat janks
assertEqual: Cat.lastMeow.expression "Hiss"

-- Invoke class method
svedka..meow: "P`meu"
assertEqual: Cat.lastMeow.cat svedka
assertEqual: Cat.lastMeow.expression "P`meu"
